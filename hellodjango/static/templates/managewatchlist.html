{% extends 'base.html' %}


{% block content %}



<div class="col-md-12">
  <div class="page-header">
    <h1>Manage Watchlist</h1>
    <a href="/sdapp/">(Go to dashboard)</a>
  </div>
</div>

<!-- Note that the below </div> tag is unmatched and closes a row opened in base.html.  The row following it is closed in the base.html file-->
</div>
<div class="row">

<div class="col-md-6">
  <div class="panel panel-default">
    <div class="panel-heading"><h4>Names</h4></div>
    <div class="list-group">

{% if watchlist.exists %}

  {% for name in watchlist %}
    {% if name.last_signal_sent != None %}
      <li class="list-group-item" href="/sdapp/{{ name.securitypricehist.ticker_sym }}/">
        <a class="btn glyphicon glyphicon-remove-circle" href="/../../sdapp/{{ name.securitypricehist.ticker_sym }}/watchtoggle" role="button" aria-hidden="true"></a>
        <a href="/../../sdapp/{{ name.securitypricehist.ticker_sym }}">{{ name.securitypricehist.ticker_sym }} - last signal {{ name.last_signal_sent }}</a>
      </li>

      {% else %}
      <li class="list-group-item" href="/sdapp/{{ name.securitypricehist.ticker_sym }}/">
        <a class="btn glyphicon glyphicon-remove-circle" href="/../../sdapp/{{ name.securitypricehist.ticker_sym }}/watchtoggle" role="button" aria-hidden="true"></a>
        <a href="/../../sdapp/{{ name.securitypricehist.ticker_sym }}">{{ name.securitypricehist.ticker_sym }} - No recent signals</a>

      </li>
    {% endif %}
  {% endfor %}
{% else %}
      <div class="list-group-item disabled">
        No names followed.
      </div>  
{% endif %}

    </div>
  </div>
</div>



<div class="col-md-6">
<div class="panel panel-default">
  <div class="panel-heading"><h4>Add Ticker</h4></div>
    <div class="panel-body">
      <form method='get'>
        <input type="text" name="q" id="id_q" placeholder="Ticker" class="form-control" autofocus>
        <div class="spacer10"></div>
        <button type="submit" value="Submit" class="btn btn-success btn">Add</button>
      </form>
    
      <div class="spacer10"></div>
      {% if search %}    
        <ul class="list-group">
        <div class="well">
        {% if not ticker_query.strip %}
          <p>Please type a ticker.</p>
        {% else %}
          <p>You searched for "{{ ticker_query }}"</p>
          {% if already_exists == True %}
            <p>{{ found_ticker }} is already on your watchlist.</p>
          {% elif found_ticker != None %}
            <p>{{ found_ticker }} has been added to your watchlist.</p>
          {% else %}
            <p>Issuer not found.</p>
          {% endif %}
        {% endif %}
        </div>
        </ul>
      {% endif %}
    </div>
  </div>
</div>



{% endblock %}